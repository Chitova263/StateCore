name: pull request

run-name: Initiated by ${{ github.actor }} | Branch ${{ github.ref }} | SHA ${{ github.sha }}

on:
  pull_request: 
    branches:
      - main
        
# A workflow run that hasnâ€™t been queued within 30 minutes of being triggered is discarded.
# A workflow run that has been queued but not processed by a GitHub-hosted runner within 45 minutes is discarded.     
# Can only apply timeouts at job and step level 
concurrency:
  group: ${{ github.workflow }}-${{ github.ref_name }}
  cancel-in-progress: true

jobs: 
  pull-request-build:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - name: checkout repository
        uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8
        
      - name: setup dotnet
        uses: actions/setup-dotnet@d4c94342e560b34958eacfc5d055d21461ed1c5d
        with:
          dotnet-version: '9.0'

      - name: dotnet info
        run: dotnet --info
        
      - name: dotnet restore
        run: dotnet restore
        
      - name: dotnet format
        run: dotnet format --verify-no-changes --no-restore

      - name: dotnet build [Release]
        run: dotnet build  --no-restore --configuration Release
          
      - name: dotnet test [Release]
        run: dotnet test --configuration Release --no-restore --no-build --verbosity normal 